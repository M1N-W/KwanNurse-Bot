# -*- coding: utf-8 -*-
"""
Knowledge Base Service Module
Provides educational content for patients
"""
from config import get_logger

logger = get_logger(__name__)


def get_wound_care_guide():
    """
    Get wound care instructions
    Returns: formatted message string
    """
    message = (
        "📖 คู่มือการดูแลแผล\n"
        "═══════════════════════════\n\n"
        
        "🩹 การทำความสะอาดแผล:\n"
        "  1. ล้างมือด้วยสบู่ให้สะอาด\n"
        "  2. ใช้น้ำเกลือชำระแผลเบาๆ\n"
        "  3. เช็ดให้แห้งด้วยผ้าสะอาด\n"
        "  4. ทายาตามแพทย์สั่ง\n"
        "  5. ปิดแผลด้วยผ้าพันแผลสะอาด\n\n"
        
        "⏰ ความถี่ในการเปลี่ยนผ้าพันแผล:\n"
        "  • แผลแห้ง: วันละ 1-2 ครั้ง\n"
        "  • แผลมีน้ำซึม: เปลี่ยนเมื่อเปียก\n"
        "  • หลังอาบน้ำ: เปลี่ยนทันที\n\n"
        
        "✅ สิ่งที่ควรทำ:\n"
        "  ✓ ดื่มน้ำ 8-10 แก้ว/วัน\n"
        "  ✓ รับประทานอาหารโปรตีนสูง\n"
        "  ✓ นอนหลับพักผ่อนเพียงพอ\n"
        "  ✓ ยกขาสูงขณะนอน\n\n"
        
        "❌ สิ่งที่ห้ามทำ:\n"
        "  ✗ ห้ามแกะสะเก็ดแผล\n"
        "  ✗ ห้ามใช้แอลกอฮอล์ล้างแผล\n"
        "  ✗ ห้ามใช้ยาไม่ตรงตามที่แพทย์สั่ง\n"
        "  ✗ ห้ามแผลโดนน้ำนาน\n\n"
        
        "🚨 เมื่อไหร่ต้องพบแพทย์:\n"
        "  • แผลบวม แดง ร้อน\n"
        "  • มีหนองหรือมีกลิ่น\n"
        "  • มีไข้สูง\n"
        "  • ปวดมากขึ้นเรื่อยๆ\n"
        "  • แผลแยกออก\n\n"
        
        "💡 หากมีข้อสงสัยเพิ่มเติม\n"
        "กรุณากดปุ่ม 'ปรึกษาพยาบาล' ค่ะ"
    )
    return message


def get_physical_therapy_guide():
    """
    Get physical therapy instructions
    Returns: formatted message string
    """
    message = (
        "🏃 คู่มือกายภาพบำบัด\n"
        "═══════════════════════════\n\n"
        
        "🎯 วัตถุประสงค์:\n"
        "  • เพิ่มความแข็งแรงของกล้ามเนื้อ\n"
        "  • ป้องกันข้อติด กล้ามเนื้ออ่อนแรง\n"
        "  • ลดอาการปวด บวม\n"
        "  • กลับมาใช้ชีวิตได้ปกติเร็วขึ้น\n\n"
        
        "📅 กำหนดการออกกำลังกาย:\n\n"
        
        "🔹 สัปดาห์ที่ 1-2 (หลังผ่าตัด):\n"
        "  • งอ-เหยียดข้อเท้า 10 ครั้ง/ชม.\n"
        "  • หายใจเข้าลึกๆ 5 ครั้ง/ชม.\n"
        "  • เปลี่ยนท่านอนทุก 2 ชม.\n"
        "  • ลุกนั่งข้างเตียงเมื่อแพทย์อนุญาต\n\n"
        
        "🔹 สัปดาห์ที่ 3-4:\n"
        "  • เดินในบ้าน 5-10 นาที วันละ 2-3 ครั้ง\n"
        "  • ยกขาตรง 10 ครั้ง x 3 เซ็ต\n"
        "  • งอเข่า 90° 10 ครั้ง x 3 เซ็ต\n"
        "  • ขึ้น-ลงบันได (ถ้าพร้อม)\n\n"
        
        "🔹 สัปดาห์ที่ 5 เป็นต้นไป:\n"
        "  • เดิน 20-30 นาที/วัน\n"
        "  • ออกกำลังกายเบา (ว่ายน้ำ, ปั่นจักรยาน)\n"
        "  • หลีกเลี่ยงกิจกรรมที่หักโหม\n\n"
        
        "⚠️ ข้อควรระวัง:\n"
        "  • ถ้าปวดมากให้หยุดทันที\n"
        "  • เริ่มช้าๆ เพิ่มเป็นลำดับ\n"
        "  • ไม่แบกของหนัก 4-6 สัปดาห์แรก\n"
        "  • สวมรองเท้าที่มีพื้นกันลื่น\n\n"
        
        "✅ เคล็ดลับ:\n"
        "  ✓ ทำในเวลาที่รู้สึกปวดน้อยที่สุด\n"
        "  ✓ อุ่นเครื่องก่อน-คลายตัวหลัง\n"
        "  ✓ หายใจสม่ำเสมอระหว่างออกกำลัง\n"
        "  ✓ บันทึกความคืบหน้า\n\n"
        
        "💡 ติดต่อนักกายภาพบำบัดได้ที่:\n"
        "กดปุ่ม 'นัดหมาย/ส่งต่อ' ค่ะ"
    )
    return message


def get_dvt_prevention_guide():
    """
    Get DVT (Deep Vein Thrombosis) prevention guide
    Returns: formatted message string
    """
    message = (
        "🩸 การป้องกันลิ่มเลือดอุดตัน (DVT)\n"
        "═══════════════════════════════════\n\n"
        
        "❓ DVT คืออะไร?\n"
        "ลิ่มเลือดอุดในหลอดเลือดดำส่วนลึก\n"
        "มักเกิดที่ขา อาจเคลื่อนไปอุดปอด (อันตราย!)\n\n"
        
        "⚠️ ใครเสี่ยง?\n"
        "  • ผู้ป่วยหลังผ่าตัด\n"
        "  • นอนติดเตียงนาน\n"
        "  • อ้วน, สูงอายุ\n"
        "  • สูบบุหรี่, คุมกำเนิด\n"
        "  • ประวัติเคยเป็น DVT\n\n"
        
        "🛡️ วิธีป้องกัน:\n\n"
        
        "1️⃣ เคลื่อนไหวบ่อยๆ:\n"
        "  • งอ-เหยียดข้อเท้า 10 ครั้ง/ชม.\n"
        "  • หมุนข้อเท้า 10 รอบ/ชม.\n"
        "  • เดินในบ้านทุกวัน\n"
        "  • หลีกเลี่ยงนั่งนานเกิน 2 ชม.\n\n"
        
        "2️⃣ ยกขาสูง:\n"
        "  • ยกขาสูงกว่าระดับหัวใจ\n"
        "  • วางหมอนรองขณะนอน\n"
        "  • ยกขาพัก 15 นาที ทุก 3-4 ชม.\n\n"
        
        "3️⃣ ดื่มน้ำเพียงพอ:\n"
        "  • 8-10 แก้ว/วัน\n"
        "  • ทำให้เลือดไหลเวียนดี\n"
        "  • ป้องกันเลือดข้น\n\n"
        
        "4️⃣ สวมถุงน่องรัดขา:\n"
        "  • ถ้าแพทย์สั่ง\n"
        "  • สวมตลอดวัน ถอดตอนนอน\n"
        "  • ช่วยเลือดไหลเวียนดีขึ้น\n\n"
        
        "5️⃣ ทานยาป้องกัน:\n"
        "  • ทานตามแพทย์สั่งเท่านั้น\n"
        "  • ห้ามหยุดยาเอง\n"
        "  • ตรวจเลือดตามนัด\n\n"
        
        "🚨 อาการเตือน (เร่งด่วน!):\n"
        "  • ขาบวม ปวด แดง ร้อน\n"
        "  • หายใจลำบาก\n"
        "  • เจ็บหน้าอก\n"
        "  • ใจสั่น\n"
        "  → ไปโรงพยาบาลทันที!\n\n"
        
        "💡 มีคำถาม?\n"
        "กดปุ่ม 'ปรึกษาพยาบาล' ค่ะ"
    )
    return message


def get_medication_guide():
    """
    Get medication instructions
    Returns: formatted message string
    """
    message = (
        "💊 คู่มือการรับประทานยา\n"
        "═══════════════════════════\n\n"
        
        "✅ หลักการทานยาที่ถูกต้อง:\n\n"
        
        "1️⃣ ทานตรงเวลา:\n"
        "  • ตั้งนาฬิกาปลุก\n"
        "  • ทานเวลาเดียวกันทุกวัน\n"
        "  • ห้ามข้ามมื้อ\n\n"
        
        "2️⃣ ทานตามที่แพทย์สั่ง:\n"
        "  • ห้ามเพิ่ม-ลดขนาดยาเอง\n"
        "  • ห้ามหยุดยาเอง แม้อาการดีขึ้น\n"
        "  • อ่านฉลากยาทุกครั้ง\n\n"
        
        "3️⃣ ทานกับอาหารหรือไม่:\n"
        "  • ยาบางชนิดต้องทานกับอาหาร\n"
        "  • ยาบางชนิดต้องทานท้องว่าง\n"
        "  • สอบถามเภสัชกรให้ชัดเจน\n\n"
        
        "📋 ยาที่มักสั่งหลังผ่าตัด:\n\n"
        
        "🔸 ยาแก้ปวด:\n"
        "  • ทานเมื่อปวด หรือตามเวลา\n"
        "  • ห้ามทานท้องว่าง\n"
        "  • ถ้าปวดมากแต่ยาไม่หาย → โทรหาแพทย์\n\n"
        
        "🔸 ยาปฏิชีวนะ:\n"
        "  • ต้องทานให้ครบหมด!\n"
        "  • ห้ามหยุดเองแม้อาการดีขึ้น\n"
        "  • ทานตรงเวลา ทุก 6-8-12 ชม.\n\n"
        
        "🔸 ยาป้องกันลิ่มเลือด:\n"
        "  • ทานตรงเวลา\n"
        "  • ระวังฟกช้ำง่าย เลือดออกง่าย\n"
        "  • แจ้งแพทย์ก่อนถอนฟัน/ผ่าตัดอื่น\n\n"
        
        "🔸 ยาลดกรด:\n"
        "  • ทานก่อนอาหาร 30-60 นาที\n"
        "  • ลดอาการแสบท้อง\n"
        "  • ห้ามนอนทันทีหลังทาน\n\n"
        
        "⚠️ ผลข้างเคียงที่ควรระวัง:\n"
        "  • คลื่นไส้ อาเจียน มาก\n"
        "  • ผื่นคัน บวม\n"
        "  • หายใจลำบาก\n"
        "  • เลือดออกง่าย\n"
        "  → หยุดยา โทรหาแพทย์ทันที\n\n"
        
        "💡 เคล็ดลับ:\n"
        "  ✓ เก็บยาในที่แห้ง เย็น\n"
        "  ✓ ห่างแสงแดด\n"
        "  ✓ พกยาติดตัวเมื่อออกนอกบ้าน\n"
        "  ✓ เก็บใบสั่งยาไว้\n\n"
        
        "📞 สอบถามเพิ่มเติม:\n"
        "กดปุ่ม 'ปรึกษาพยาบาล' ค่ะ"
    )
    return message


def get_warning_signs_guide():
    """
    Get warning signs that require immediate medical attention
    Returns: formatted message string
    """
    message = (
        "🚨 สัญญาณอันตรายที่ต้องพบแพทย์ทันที\n"
        "═════════════════════════════════════\n\n"
        
        "⚠️ อาการเหล่านี้ห้ามรอ!\n"
        "โทรหาพยาบาล หรือมาโรงพยาบาลทันที:\n\n"
        
        "🔴 ระดับ 1: เร่งด่วนมาก (ER ทันที!)\n\n"
        
        "1️⃣ ปัญหาการหายใจ:\n"
        "  • หายใจลำบาก หอบเหนื่อย\n"
        "  • หายใจเร็วผิดปกติ\n"
        "  • ปวดเจ็บหน้าอก\n"
        "  • ริมฝีปากเขียว/ซีด\n\n"
        
        "2️⃣ อาการทางหัวใจ:\n"
        "  • เจ็บหน้าอกแน่นตึง\n"
        "  • ใจสั่น เต้นผิดจังหวะ\n"
        "  • ใจเต้นเร็ว >120 ครั้ง/นาที\n\n"
        
        "3️⃣ เลือดออกมาก:\n"
        "  • แผลเปิดเลือดไหลไม่หยุด\n"
        "  • อาเจียนเป็นเลือด\n"
        "  • ถ่ายดำมาก\n"
        "  • ปัสสาวะเป็นเลือด\n\n"
        
        "4️⃣ อาการทางสมอง:\n"
        "  • มึนงง สับสน พูดไม่ชัด\n"
        "  • เห็นภาพหลอน\n"
        "  • ชักหรือหมดสติ\n"
        "  • แขนขาอ่อนแรงเฉียบพลัน\n\n"
        
        "🟠 ระดับ 2: เร่งด่วน (ติดต่อภายใน 24 ชม.)\n\n"
        
        "5️⃣ การติดเชื้อ:\n"
        "  • ไข้สูง >38.5°C\n"
        "  • แผลบวมแดงร้อนมาก\n"
        "  • มีหนองไหลมาก\n"
        "  • แผลมีกลิ่นเหม็น\n\n"
        
        "6️⃣ อาการปวดรุนแรง:\n"
        "  • ปวดระดับ 8-10\n"
        "  • ปวดมากขึ้นเรื่อยๆ\n"
        "  • ยาแก้ปวดไม่ได้ผล\n"
        "  • ปวดร่วมกับบวม\n\n"
        
        "7️⃣ ปัญหาแผล:\n"
        "  • แผลแยก เปิดกว้าง\n"
        "  • เห็นเนื้อเยื่อข้างใน\n"
        "  • แผลไม่หาย >2 สัปดาห์\n"
        "  • แผลดำ เนื้อตาย\n\n"
        
        "8️⃣ ลิ่มเลือด (DVT):\n"
        "  • ขาบวม ปวด แดง ร้อน\n"
        "  • ขาข้างเดียวบวมมากกว่าอีกข้าง\n"
        "  • เส้นเลือดโป่ง แข็ง\n\n"
        
        "🟡 ระดับ 3: ควรติดตาม (นัดพบแพทย์)\n\n"
        
        "9️⃣ อาการผิดปกติอื่นๆ:\n"
        "  • คลื่นไส้ อาเจียน ไม่หาย\n"
        "  • ท้องผูก >3 วัน\n"
        "  • ปวดท้องมาก\n"
        "  • น้ำหนักลด >5 กก./เดือน\n\n"
        
        "📞 หมายเลขฉุกเฉิน:\n"
        "═══════════════════════\n"
        "  🚑 1669 - รถพยาบาล\n"
        "  ☎️ [หมายเลขโรงพยาบาล]\n"
        "  💬 กดปุ่ม 'ปรึกษาพยาบาล'\n\n"
        
        "💡 เมื่อสงสัย:\n"
        "ถ้าไม่แน่ใจว่าเร่งด่วนหรือไม่\n"
        "→ โทรถามพยาบาลดีกว่ารอ!"
    )
    return message


def get_knowledge_menu():
    """
    Get main knowledge base menu
    Returns: formatted message string
    """
    message = (
        "📚 ความรู้และคำแนะนำ\n"
        "═══════════════════════════\n\n"
        
        "เลือกหัวข้อที่ต้องการเรียนรู้:\n\n"
        
        "1️⃣ 🩹 การดูแลแผล\n"
        "   - วิธีทำความสะอาดแผล\n"
        "   - ความถี่การเปลี่ยนผ้าพันแผล\n"
        "   - สิ่งที่ควรและไม่ควรทำ\n\n"
        
        "2️⃣ 🏃 กายภาพบำบัด\n"
        "   - โปรแกรมออกกำลังกายหลังผ่าตัด\n"
        "   - การเคลื่อนไหวที่เหมาะสม\n"
        "   - ข้อควรระวัง\n\n"
        
        "3️⃣ 🩸 ป้องกันลิ่มเลือด (DVT)\n"
        "   - อาการและสาเหตุ\n"
        "   - วิธีป้องกัน\n"
        "   - สัญญาณเตือน\n\n"
        
        "4️⃣ 💊 การรับประทานยา\n"
        "   - วิธีทานยาที่ถูกต้อง\n"
        "   - ยาแต่ละชนิด\n"
        "   - ผลข้างเคียง\n\n"
        
        "5️⃣ 🚨 สัญญาณอันตราย\n"
        "   - อาการที่ต้องพบแพทย์ทันที\n"
        "   - ระดับความเร่งด่วน\n"
        "   - หมายเลขฉุกเฉิน\n\n"
        
        "💬 วิธีใช้งาน:\n"
        "พิมพ์หัวข้อที่ต้องการ เช่น:\n"
        "  'ดูแลแผล'\n"
        "  'กายภาพบำบัด'\n"
        "  'ป้องกันลิ่มเลือด'\n"
        "  'ทานยา'\n"
        "  'สัญญาณอันตราย'\n\n"
        
        "หรือพิมพ์ 'ความรู้' เพื่อดูเมนูนี้อีกครั้ง"
    )
    return message
